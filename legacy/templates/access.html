<!DOCTYPE html>
<html>
<head>
    <title>Authenticate & Verify</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <script>
        function verifyChecksum() {
            let entered = document.getElementById("userChecksum").value.trim();
            let expected = document.getElementById("expectedChecksum").innerText.trim();
            let btn = document.getElementById("downloadBtn");

            if (entered === expected) {
                alert("Checksum verified successfully!");
                btn.disabled = false;
            } else {
                alert("âš  WARNING! Checksum does NOT match.");
                btn.disabled = true;
            }
        }
    </script>
</head>

<body>
<div class="container mt-5">
    <h2 class="text-center mb-4">Authenticate & Verify File</h2>

    <div class="card p-4 shadow-sm">
        <p><strong>Expected SHA-256 Checksum:</strong>
            <span id="expectedChecksum">{{ checksum }}</span></p>

        <form method="POST">
            <input type="password" name="password" class="form-control mb-2" placeholder="Enter file password" required>

            <input type="text" name="userChecksum" id="userChecksum" class="form-control mb-2"
                   placeholder="Paste checksum you receieved" required>

            <button type="button" class="btn btn-warning w-100 mb-3"
                    onclick="verifyChecksum()">Verify Checksum</button>

            <button id="downloadBtn" disabled class="btn btn-success w-100">Download File</button>
        </form>
    </div>
</div>
</body>
</html>
